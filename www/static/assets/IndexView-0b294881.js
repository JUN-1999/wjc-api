import{d as B,aI as D,e as o,c as z,a as e,w as a,aJ as w,v as c,f as t,i as S,o as b,p as k,k as U,_ as C,t as j,aM as E,aN as H,aO as P,aP as J,j as F,q as N,aj as q,h as G,u as K}from"./index-df65ba1e.js";const Q="/assets/login_news-6a2810d6.svg",W="/assets/wallhaven-0wlq8p-4811343e.jpg",X="/assets/tree-52d65ee4.svg",R=n=>(k("data-v-9eb74269"),n=n(),U(),n),Y=R(()=>e("img",{src:X,alt:""},null,-1)),Z={class:"account form-item"},ee=R(()=>e("span",{class:"input-title"},"账号",-1)),se={class:"input-tip"},te={class:"password form-item"},ae=R(()=>e("span",{class:"input-title"},"密码",-1)),le={class:"input-tip"},oe=B({__name:"IndexView",props:{zindex:{type:Number,required:!0}},emits:["login-success"],setup(n,{emit:x}){const d=D(),l=o({account:"",password:""});let p=o(0),s=o(0);const u=async()=>{if(l.value.account.trim())p.value=0;else return p.value=1,!1;if(l.value.password.trim())s.value=0;else return s.value=1,!1;await d.login(l.value)&&x("login-success")};return(g,_)=>(b(),z("div",{style:S({zIndex:n.zindex}),class:"login-box"},[Y,e("div",Z,[ee,a(e("input",{placeholder:"请输入账号",type:"text","onUpdate:modelValue":_[0]||(_[0]=m=>l.value.account=m)},null,512),[[w,l.value.account,void 0,{trim:!0}]]),a(e("span",se,"请输入账号",512),[[c,t(p)==1]])]),e("div",te,[ae,a(e("input",{type:"password","onUpdate:modelValue":_[1]||(_[1]=m=>l.value.password=m)},null,512),[[w,l.value.password,void 0,{trim:!0}]]),a(e("span",le,"请输入密码",512),[[c,t(s)==1]])]),e("div",{class:"log-btn",onClick:u}," 登录 ")],4))}});const ne=C(oe,[["__scopeId","data-v-9eb74269"]]),ie="/assets/sandbeach-ecc9a5f4.svg",y=n=>(k("data-v-3bde27e5"),n=n(),U(),n),ue=y(()=>e("img",{class:"top-img",src:ie,alt:""},null,-1)),ce={class:"account form-item"},de=y(()=>e("span",{class:"input-title"},"账号",-1)),re={class:"input-tip"},pe={class:"input-tip"},_e={class:"password form-item"},ve=y(()=>e("span",{class:"input-title"},"密码",-1)),me={class:"input-tip"},fe={class:"password form-item"},he=y(()=>e("span",{class:"input-title"},"确认密码",-1)),ge={class:"input-tip"},we={class:"input-tip"},ye={class:"email form-item"},xe=y(()=>e("span",{class:"input-title"},"邮箱",-1)),be={class:"input-tip"},Ie={class:"input-tip"},$e={class:"input-tip"},Ve={class:"authcode form-item"},Be=y(()=>e("span",{class:"input-title"},"验证码",-1)),ze={class:"auth-code"},Se={class:"input-tip"},ke=B({__name:"IndexView",props:{zindex:{type:Number,required:!0}},emits:["register-success"],setup(n,{emit:x}){let d=o(60),l=o(!1),p=o(0);const s=o({account:"",password:"",confirm_password:"",email:"",authcode:""});let u=o(0);const g=async()=>{s.value.account?(await E({account:s.value.account})).data?u.value=0:u.value=2:u.value=1};let _=o(0);const m=async()=>{s.value.password?_.value=0:_.value=1};let h=o(0);const $=()=>{s.value.confirm_password?s.value.password!=s.value.confirm_password?h.value=2:h.value=0:h.value=1};let r=o(0);const V=async()=>{const f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;s.value.email?f.test(s.value.email)?(await H({email:s.value.email})).data?r.value=0:r.value=2:r.value=3:r.value=1};let I=o(0);const T=()=>{s.value.authcode?I.value=0:I.value=1},L=f=>{const i=f.target.value;/^\d{0,6}$/.test(i)?s.value.authcode=i:s.value.authcode=i.substring(0,6)},M=async()=>{if(l.value)return!1;await V(),r.value==1?alert("请输入邮箱"):r.value==2?alert("当前邮箱已被使用，不能再注册"):r.value==3?alert("当前邮箱格式不正确"):(await P({email:s.value.email})).errno==0&&(l.value=!0,d.value=60,p.value=setInterval(()=>{d.value--,d.value==0&&(l.value=!1,d.value=60,clearInterval(p.value),p.value=0)},1e3))},O=async()=>{if(await g(),await m(),await $(),await V(),await T(),u.value==0&&_.value==0&&h.value==0&&r.value==0&&I.value==0){let f=await J(s.value);f.errno!=0?alert(f.errmsg):(alert("注册成功"),x("register-success"))}};return(f,i)=>(b(),z("div",{style:S({zIndex:n.zindex}),class:"register-box"},[ue,e("div",ce,[de,a(e("input",{onBlur:g,placeholder:"请输入账号",type:"text","onUpdate:modelValue":i[0]||(i[0]=v=>s.value.account=v)},null,544),[[w,s.value.account]]),a(e("span",re,"请输入账号",512),[[c,t(u)==1]]),a(e("span",pe,"当前账号已存在，请重新输入账号",512),[[c,t(u)==2]])]),e("div",_e,[ve,a(e("input",{onBlur:m,type:"password","onUpdate:modelValue":i[1]||(i[1]=v=>s.value.password=v)},null,544),[[w,s.value.password]]),a(e("span",me,"请输入密码",512),[[c,t(_)==1]])]),e("div",fe,[he,a(e("input",{onBlur:$,type:"password","onUpdate:modelValue":i[2]||(i[2]=v=>s.value.confirm_password=v)},null,544),[[w,s.value.confirm_password]]),a(e("span",ge,"请输入确认密码",512),[[c,t(h)==1]]),a(e("span",we,"两次密码不一致",512),[[c,t(h)==2]])]),e("div",ye,[xe,a(e("input",{onBlur:V,type:"email",placeholder:"请输入邮箱","onUpdate:modelValue":i[3]||(i[3]=v=>s.value.email=v)},null,544),[[w,s.value.email]]),a(e("span",be,"请输入邮箱",512),[[c,t(r)==1]]),a(e("span",Ie,"该邮箱已被使用",512),[[c,t(r)==2]]),a(e("span",$e,"邮箱格式不正确",512),[[c,t(r)==3]])]),e("div",Ve,[Be,e("div",ze,[a(e("input",{class:"auth-code-input",onInput:L,onBlur:T,type:"number",placeholder:"请输入验证码","onUpdate:modelValue":i[4]||(i[4]=v=>s.value.authcode=v)},null,544),[[w,s.value.authcode]]),e("div",{onClick:M,class:"post-authcode"},j(t(l)?t(d):"发送验证码"),1)]),a(e("span",Se,"请输入验证码",512),[[c,t(I)==1]])]),e("div",{class:"log-btn",onClick:O}," 注册 ")],4))}});const Ue=C(ke,[["__scopeId","data-v-3bde27e5"]]),A=n=>(k("data-v-3df7273b"),n=n(),U(),n),Ce={class:"center"},Re=A(()=>e("div",{class:"news"},[e("img",{src:Q,alt:""})],-1)),Te={class:"input-box"},Ne={class:"iconfont icon-zhuce1"},qe={class:"iconfont icon-dengluzhanghao"},je=A(()=>e("img",{class:"bg-img",src:W,alt:""},null,-1)),Ae=B({__name:"IndexView",setup(n){const x=K();let d=o(!0),l=o(!0),p=o(!1),s=o(!1),u=o(!0),g=o(!1),_=o(!1);const m=function(){u.value&&(u.value=!1,d.value?(p.value=!0,s.value=!0,l.value=!1,setTimeout(()=>{d.value=!1,u.value=!0},1e3)):(d.value=!0,l.value=!0,s.value=!1,setTimeout(()=>{p.value=!1,u.value=!0},1e3)))},h=function(){g.value=!0,x.push("/Treehole")};return F(()=>{_.value=!0}),($,r)=>(b(),z("div",{class:G([{login_success:t(g)},"box"])},[e("div",Ce,[Re,e("div",Te,[t(d)?(b(),N(ne,{key:0,onLoginSuccess:h,zindex:t(l)?1:0},null,8,["zindex"])):q("",!0),t(p)?(b(),N(Ue,{key:1,onRegisterSuccess:m,zindex:t(s)?1:0},null,8,["zindex"])):q("",!0),e("div",{class:"changbox",onClick:m},[a(e("div",Ne,null,512),[[c,t(l)]]),a(e("div",qe,null,512),[[c,t(s)]]),e("div",{style:S({"--color":t(l)?"#8cce72":"#7bb835"}),class:"changebox-text"},j(t(l)?"去注册":"去登录"),5)])])]),je],2))}});const Me=C(Ae,[["__scopeId","data-v-3df7273b"]]);export{Me as default};
