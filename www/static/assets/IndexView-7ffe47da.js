import{d as V,j as H,r as l,o as I,c as B,a as e,w as t,k as h,v as c,u as a,e as N,p as z,i as k,f as L,g as S,t as O,l as j,m as M,s as P,q as F,x as T,y as q}from"./index-188089a2.js";const G="/assets/wallhaven-kwrx3q-a5dcb72a.png",J="/assets/tree-52d65ee4.svg",U=o=>(z("data-v-91aad47c"),o=o(),k(),o),K=U(()=>e("img",{src:J,alt:""},null,-1)),Q={class:"account form-item"},W=U(()=>e("span",{class:"input-title"},"账号",-1)),X={class:"input-tip"},Y={class:"password form-item"},Z=U(()=>e("span",{class:"input-title"},"密码",-1)),ee={class:"input-tip"},se=V({__name:"IndexView",props:{zindex:{type:Number,required:!0}},setup(o){const f=H(),u=L(),n=l({account:"",password:""});let r=l(0),s=l(0);const d=async()=>{if(n.value.account.trim())r.value=0;else return r.value=1,!1;if(n.value.password.trim())s.value=0;else return s.value=1,!1;await f.login(n.value)&&(console.log("router",u),u.push("/Treehole/index"))};return(y,_)=>(I(),B("div",{style:N({zIndex:o.zindex}),class:"login-box"},[K,e("div",Q,[W,t(e("input",{placeholder:"请输入账号",type:"text","onUpdate:modelValue":_[0]||(_[0]=w=>n.value.account=w)},null,512),[[h,n.value.account,void 0,{trim:!0}]]),t(e("span",X,"请输入账号",512),[[c,a(r)==1]])]),e("div",Y,[Z,t(e("input",{type:"password","onUpdate:modelValue":_[1]||(_[1]=w=>n.value.password=w)},null,512),[[h,n.value.password,void 0,{trim:!0}]]),t(e("span",ee,"请输入密码",512),[[c,a(s)==1]])]),e("div",{class:"log-btn",onClick:d}," 登录 ")],4))}});const te=S(se,[["__scopeId","data-v-91aad47c"]]),ae="/assets/sandbeach-ecc9a5f4.svg",x=o=>(z("data-v-ea2c4bf6"),o=o(),k(),o),le=x(()=>e("img",{class:"top-img",src:ae,alt:""},null,-1)),oe={class:"account form-item"},ne=x(()=>e("span",{class:"input-title"},"账号",-1)),ie={class:"input-tip"},ue={class:"input-tip"},ce={class:"password form-item"},re=x(()=>e("span",{class:"input-title"},"密码",-1)),de={class:"input-tip"},pe={class:"password form-item"},_e=x(()=>e("span",{class:"input-title"},"确认密码",-1)),ve={class:"input-tip"},me={class:"input-tip"},fe={class:"email form-item"},he=x(()=>e("span",{class:"input-title"},"邮箱",-1)),we={class:"input-tip"},ge={class:"input-tip"},xe={class:"input-tip"},ye={class:"authcode form-item"},Ie=x(()=>e("span",{class:"input-title"},"验证码",-1)),$e={class:"auth-code"},be={class:"input-tip"},Ve=V({__name:"IndexView",props:{zindex:{type:Number,required:!0}},emits:["register-success"],setup(o,{emit:f}){let u=l(60),n=l(!1),r=l(0);const s=l({account:"",password:"",confirm_password:"",email:"",authcode:""});let d=l(0);const y=async()=>{s.value.account?(await j({account:s.value.account})).data?d.value=0:d.value=2:d.value=1};let _=l(0);const w=async()=>{s.value.password?_.value=0:_.value=1};let g=l(0);const R=()=>{s.value.confirm_password?s.value.password!=s.value.confirm_password?g.value=2:g.value=0:g.value=1};let p=l(0);const b=async()=>{const m=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;s.value.email?m.test(s.value.email)?(await M({email:s.value.email})).data?p.value=0:p.value=2:p.value=3:p.value=1};let $=l(0);const C=()=>{s.value.authcode?$.value=0:$.value=1},A=m=>{const i=m.target.value;/^\d{0,6}$/.test(i)?s.value.authcode=i:s.value.authcode=i.substring(0,6)},D=async()=>{if(n.value)return!1;await b(),p.value==1?alert("请输入邮箱"):p.value==2?alert("当前邮箱已被使用，不能再注册"):p.value==3?alert("当前邮箱格式不正确"):(await P({email:s.value.email})).errno==0&&(n.value=!0,u.value=60,r.value=setInterval(()=>{u.value--,u.value==0&&(n.value=!1,u.value=60,clearInterval(r.value),r.value=0)},1e3))},E=async()=>{if(await y(),await w(),await R(),await b(),await C(),d.value==0&&_.value==0&&g.value==0&&p.value==0&&$.value==0){let m=await F(s.value);m.errno!=0?alert(m.errmsg):(alert("注册成功"),f("register-success"))}};return(m,i)=>(I(),B("div",{style:N({zIndex:o.zindex}),class:"register-box"},[le,e("div",oe,[ne,t(e("input",{onBlur:y,placeholder:"请输入账号",type:"text","onUpdate:modelValue":i[0]||(i[0]=v=>s.value.account=v)},null,544),[[h,s.value.account]]),t(e("span",ie,"请输入账号",512),[[c,a(d)==1]]),t(e("span",ue,"当前账号已存在，请重新输入账号",512),[[c,a(d)==2]])]),e("div",ce,[re,t(e("input",{onBlur:w,type:"password","onUpdate:modelValue":i[1]||(i[1]=v=>s.value.password=v)},null,544),[[h,s.value.password]]),t(e("span",de,"请输入密码",512),[[c,a(_)==1]])]),e("div",pe,[_e,t(e("input",{onBlur:R,type:"password","onUpdate:modelValue":i[2]||(i[2]=v=>s.value.confirm_password=v)},null,544),[[h,s.value.confirm_password]]),t(e("span",ve,"请输入确认密码",512),[[c,a(g)==1]]),t(e("span",me,"两次密码不一致",512),[[c,a(g)==2]])]),e("div",fe,[he,t(e("input",{onBlur:b,type:"email",placeholder:"请输入邮箱","onUpdate:modelValue":i[3]||(i[3]=v=>s.value.email=v)},null,544),[[h,s.value.email]]),t(e("span",we,"请输入邮箱",512),[[c,a(p)==1]]),t(e("span",ge,"该邮箱已被使用",512),[[c,a(p)==2]]),t(e("span",xe,"邮箱格式不正确",512),[[c,a(p)==3]])]),e("div",ye,[Ie,e("div",$e,[t(e("input",{class:"auth-code-input",onInput:A,onBlur:C,type:"number",placeholder:"请输入验证码","onUpdate:modelValue":i[4]||(i[4]=v=>s.value.authcode=v)},null,544),[[h,s.value.authcode]]),e("div",{onClick:D,class:"post-authcode"},O(a(n)?a(u):"发送验证码"),1)]),t(e("span",be,"请输入验证码",512),[[c,a($)==1]])]),e("div",{class:"log-btn",onClick:E}," 注册 ")],4))}});const Be=S(Ve,[["__scopeId","data-v-ea2c4bf6"]]),ze=o=>(z("data-v-03507104"),o=o(),k(),o),ke={class:"box"},Se={class:"input-box"},Ue={class:"iconfont icon-zhuce"},Re={class:"iconfont icon-denglu"},Ce=ze(()=>e("img",{class:"bg-img",src:G,alt:""},null,-1)),Te=V({__name:"IndexView",setup(o){let f=l(!0),u=l(!0),n=l(!1),r=l(!1),s=l(!0);const d=function(){s.value&&(s.value=!1,f.value?(n.value=!0,r.value=!0,u.value=!1,setTimeout(()=>{f.value=!1,s.value=!0},1e3)):(f.value=!0,u.value=!0,r.value=!1,setTimeout(()=>{n.value=!1,s.value=!0},1e3)))};return(y,_)=>(I(),B("div",ke,[e("div",Se,[a(f)?(I(),T(te,{key:0,zindex:a(u)?1:0},null,8,["zindex"])):q("",!0),a(n)?(I(),T(Be,{key:1,onRegisterSuccess:d,zindex:a(r)?1:0},null,8,["zindex"])):q("",!0),e("div",{class:"changbox",onClick:d},[t(e("div",Ue,null,512),[[c,a(u)]]),t(e("div",Re,null,512),[[c,a(r)]])])]),Ce]))}});const Ne=S(Te,[["__scopeId","data-v-03507104"]]);export{Ne as default};
