import{a as V}from"./file-3787f11b.js";import{d as W,e as r,o as i,c as f,a as l,w as _,v as k,f as h,x as S,W as j,h as M,_ as C,F as $,r as B,i as x,E as w,q as I,p as F,k as H}from"./index-f0ab4c39.js";import{a as U,V as E}from"./ViewVideo-0c47351e.js";const N=["src"],z={class:"tip"},G={class:"header"},J={class:"content"},L=["src"],O=W({__name:"ViewImg",props:{src:{type:String,default:""},showDelete:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:!1}},emits:["imgDelete"],setup(e,{emit:y}){const m=e;let p=r(!1),n=r(!1);const u=c=>{U({images:[m.src]})},o=()=>{n.value=!0},a=()=>{n.value=!1},v=c=>{y("imgDelete",c)};return(c,t)=>(i(),f("div",{onMouseenter:o,onMouseleave:a,class:"view-img"},[l("img",{id:"img",src:e.src},null,8,N),_(l("div",z,[l("i",{onClick:t[0]||(t[0]=d=>u()),class:"iconfont icon-fangda"}),e.showDelete?(i(),f("i",{key:0,onClick:t[1]||(t[1]=d=>v(e.src)),class:"iconfont icon-shanchu"})):S("",!0)],512),[[k,h(n)]]),_(l("div",{class:M([{"max-img-show":h(p)},"max-img"])},[l("div",G,[l("i",{onClick:t[2]||(t[2]=j(d=>u(),["stop"])),class:"iconfont icon-guanbi"})]),l("div",J,[l("img",{src:e.src,alt:""},null,8,L)])],2),[[k,h(p)]])],32))}}),q=C(O,[["__scopeId","data-v-a62a76f1"]]),A=e=>(F("data-v-73f8becf"),e=e(),H(),e),K=A(()=>l("i",{class:"iconfont icon-tianjia"},null,-1)),P=[K],Q=["accept"],R=W({__name:"WjcUpload",props:{pics:null,accept:{default:"image/*"},labelStyleWidth:null,labelStyleHeight:null},emits:["uploadSuccess","mediaDelete"],setup(e,{expose:y,emit:m}){const p=e,n="uploadIMG_"+Math.random()*1e3,u=r();let o=r(!1);const a=r(null),v=async()=>{var t,d;if(o.value=!0,(t=a.value)!=null&&t.files){w({message:"图片开始上传",type:"success"});const s=((d=a.value)==null?void 0:d.files)&&a.value.files[0],b=new FormData;b.append("file",s);let g=await V(b);if(o.value=!1,g.errno===0){w({message:"图片上传成功",type:"success"});let D=JSON.parse(JSON.stringify(p.pics));D.push({name:g.data.name,url:g.data.url,type:g.data.type}),m("uploadSuccess",D)}}else o.value=!1,w({message:"取消上传"})},c=t=>{m("mediaDelete",t)};return y({wjcUpload:u,inputFile:a}),(t,d)=>(i(),f("div",{class:"wjc-upload",ref_key:"wjcUpload",ref:u},[(i(!0),f($,null,B(e.pics,s=>(i(),f("div",{class:"input-label",key:s.name,style:x({width:e.labelStyleWidth?e.labelStyleWidth:"140px",height:e.labelStyleHeight?e.labelStyleHeight:"140px"})},[s.type=="img"?(i(),I(q,{key:0,loading:h(o),src:s.url,showDelete:!0,onImgDelete:c},null,8,["loading","src"])):S("",!0),s.type=="video"?(i(),I(E,{key:1,src:s.url,showDelete:!0,onVideoDelete:c},null,8,["src"])):S("",!0)],4))),128)),l("label",{style:x({width:e.labelStyleWidth?e.labelStyleWidth:"140px",height:e.labelStyleHeight?e.labelStyleHeight:"140px"}),for:n,class:"input-label"},P,4),l("input",{accept:e.accept,ref_key:"inputFile",ref:a,onChange:v,type:"file",name:"",id:n,style:{display:"none"}},null,40,Q)],512))}});const Z=C(R,[["__scopeId","data-v-73f8becf"]]);export{Z as W};
