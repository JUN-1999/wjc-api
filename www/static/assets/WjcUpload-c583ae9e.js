import{u as C}from"./file-6c095e46.js";import{d as I,e as u,o as n,c as r,a as t,w as _,v as k,f,x as w,a5 as j,h as M,_ as W,F as V,r as $,i as D,E as v,q as x,p as B,k as F}from"./index-652e1b4d.js";import{a as H,V as U}from"./ViewVideo-8776cce8.js";const E=["src"],N={class:"tip"},z={class:"header"},G={class:"content"},J=["src"],L=I({__name:"ViewImg",props:{src:{type:String,default:""},showDelete:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:!1}},emits:["imgDelete"],setup(e,{emit:p}){const g=e;let c=u(!1),d=u(!1);const i=a=>{H({images:[g.src]})},o=()=>{d.value=!0},h=()=>{d.value=!1},y=a=>{p("imgDelete",a)};return(a,s)=>(n(),r("div",{onMouseenter:o,onMouseleave:h,class:"view-img"},[t("img",{id:"img",src:e.src},null,8,E),_(t("div",N,[t("i",{onClick:s[0]||(s[0]=l=>i()),class:"iconfont icon-fangda"}),e.showDelete?(n(),r("i",{key:0,onClick:s[1]||(s[1]=l=>y(e.src)),class:"iconfont icon-shanchu"})):w("",!0)],512),[[k,f(d)]]),_(t("div",{class:M([{"max-img-show":f(c)},"max-img"])},[t("div",z,[t("i",{onClick:s[2]||(s[2]=j(l=>i(),["stop"])),class:"iconfont icon-guanbi"})]),t("div",G,[t("img",{src:e.src,alt:""},null,8,J)])],2),[[k,f(c)]])],32))}}),O=W(L,[["__scopeId","data-v-a62a76f1"]]),q=e=>(B("data-v-7fb374d5"),e=e(),F(),e),A=q(()=>t("i",{class:"iconfont icon-tianjia"},null,-1)),K=[A],P=["accept"],Q=I({__name:"WjcUpload",props:{pics:null,accept:{default:"image/*"},labelStyleWidth:null,labelStyleHeight:null},emits:["uploadSuccess"],setup(e,{emit:p}){const g=e,c="uploadIMG_"+Math.random()*1e3,d=u();let i=u(!1);const o=u(null),h=async()=>{var a,s;if(i.value=!0,(a=o.value)!=null&&a.files){v({message:"图片开始上传",type:"success"});const l=((s=o.value)==null?void 0:s.files)&&o.value.files[0],S=new FormData;S.append("file",l);let m=await C(S);if(i.value=!1,m.errno===0){v({message:"图片上传成功",type:"success"});let b=JSON.parse(JSON.stringify(g.pics));b.push({name:m.data.name,url:m.data.url,type:m.data.type}),p("uploadSuccess",b)}}else i.value=!1,v({message:"取消上传"})},y=a=>{};return(a,s)=>(n(),r("div",{class:"wjc-upload",ref_key:"wjcUpload",ref:d},[(n(!0),r(V,null,$(e.pics,l=>(n(),r("div",{class:"input-label",key:l.name,style:D({width:e.labelStyleWidth?e.labelStyleWidth:"140px",height:e.labelStyleHeight?e.labelStyleHeight:"140px"})},[l.type=="img"?(n(),x(O,{key:0,loading:f(i),src:l.url,showDelete:!0,onImgDelete:y},null,8,["loading","src"])):w("",!0),l.type=="video"?(n(),x(U,{key:1,src:l.url,showDelete:!0},null,8,["src"])):w("",!0)],4))),128)),t("label",{style:D({width:e.labelStyleWidth?e.labelStyleWidth:"140px",height:e.labelStyleHeight?e.labelStyleHeight:"140px"}),for:c,class:"input-label"},K,4),t("input",{accept:e.accept,ref_key:"inputFile",ref:o,onChange:h,type:"file",name:"",id:c,style:{display:"none"}},null,40,P)],512))}});const Y=W(Q,[["__scopeId","data-v-7fb374d5"]]);export{Y as W};
