import{a as x}from"./article-f6710346.js";import{E as H}from"./el-image-viewer-df7fdf1b.js";import{_ as V}from"./EditArticle1-e2267e45.js";import{d as w,e as n,j as D,E as T,o as a,c,a as e,F as m,r as y,f as I,i as z,t as h,s as L,y as E,b as N,p as M,k as U,z as B,u as P,_ as R}from"./index-dc1299ce.js";import{V as O}from"./ViewVideo-c5c4e74c.js";import"./scroll-b9dc70e8.js";const F="/assets/watermelon-a30908d6.png",$="/assets/find-7414855f.png",j="/assets/ToTop-c0814b53.svg",_=u=>(M("data-v-76a12817"),u=u(),U(),u),q={class:"table"},J=_(()=>e("h1",null,[B("瓜大棚"),e("img",{src:F,alt:""})],-1)),G=_(()=>e("div",{class:"text"},"种瓜",-1)),K=_(()=>e("img",{src:V,alt:"新增瓜"},null,-1)),Q=[G,K],W=_(()=>e("div",{class:"input-group"},[e("input",{type:"search",placeholder:"请输入..."}),e("img",{src:$,alt:""})],-1)),X=_(()=>e("thead",null,[e("tr",{style:{position:"relative","z-index":"20"}},[e("th",null,"用户"),e("th",null,"信息"),e("th",null,"日期"),e("th",null,"操作")])],-1)),Y={class:"user-info"},Z=["src"],ee={class:"brief"},te={class:"brief-title"},se=["innerHTML"],le={class:"brief-imgs"},oe=["onClick"],ae=_(()=>e("img",{src:j,alt:""},null,-1)),re=[ae],ie=w({__name:"HomeView",setup(u){const v=P();let d=n(1),C=n(5),p=n([]),r=n(0),g=n(!1);n(!1),D(async()=>{await f()});const S=()=>[v.push("/TreeHole/TreeHoleIndex/ArticleEdit/0")],b=async s=>{v.push(`/TreeHole/TreeHoleIndex/ArticleDetail/${s.ARTICLE_UUID}`)},f=async()=>{if(g.value)console.log("1"),T({message:"没有更多瓜了",type:"info"});else{let s=await x({page:d.value,pageSize:C.value});if(s.data.data.length===0)console.log("2"),g.value=!0,T({message:"没有更多瓜了",type:"info"});else{let i=s.data.data;i=i.map(o=>(o.PICS=JSON.parse(o.PICS).slice(0,3),o)),p.value=[...p.value,...i]}}setTimeout(()=>{clearTimeout(r.value),r.value=0},1500)},A=s=>{r.value==0&&(r.value=setTimeout(()=>{const{scrollTop:i,clientHeight:o,scrollHeight:t}=s.target;i+o+20>=t?(d.value+=1,f()):(clearTimeout(r.value),r.value=0)},0))},k=()=>{document.querySelector(".shell").scrollTo({top:0,behavior:"smooth"})};return(s,i)=>{const o=H;return a(),c("div",q,[e("section",{class:"header"},[J,e("div",{class:"ArticleEdit",onClick:S},Q),W]),e("section",{class:"shell",onScroll:A},[e("table",null,[X,e("tbody",null,[(a(!0),c(m,null,y(I(p),t=>(a(),c("tr",{key:t.ARTICLE_UUID},[e("td",Y,[e("img",{class:"avatar",src:t.AVATAR,alt:""},null,8,Z),e("span",null,h(t.ACCOUNT),1)]),e("td",ee,[e("div",te,h(t.TITLE),1),e("div",{class:"brief-text",innerHTML:t.CONTENT},null,8,se),e("div",le,[(a(!0),c(m,null,y(t.PICS,(l,ne)=>(a(),c(m,null,[l.type=="img"?(a(),L(o,{lazy:"",class:"brief-img",key:l.url,src:l.url,"preview-src-list":[l.url],"zoom-rate":1.1,fit:"cover"},null,8,["src","preview-src-list","zoom-rate"])):E("",!0),l.type=="video"?(a(),c("div",{class:"brief-img",key:l.url},[N(O,{src:l.url},null,8,["src"])])):E("",!0)],64))),256))])]),e("td",null,h(t.UPDATE_TIME||t.ADD_TIME),1),e("td",null,[e("p",{class:"button",onClick:l=>b(t)},"查看",8,oe)])]))),128))])])],32),e("div",{class:"toTop",onClick:k,style:z({opacity:I(d)>1?1:0})},re,4)])}}});const he=R(ie,[["__scopeId","data-v-76a12817"]]);export{he as default};
